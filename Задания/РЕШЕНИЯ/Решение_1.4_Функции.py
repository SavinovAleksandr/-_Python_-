"""
РЕШЕНИЕ ЗАДАНИЯ 1.4: Создание функций
"""

print("=" * 60)
print("РЕШЕНИЕ ЗАДАНИЯ 1.4")
print("=" * 60)


# 1. Функция рассчитать_мощность
def рассчитать_мощность(напряжение, ток):
    """
    Рассчитывает мощность по формуле P = U * I
    
    Аргументы:
        напряжение (float): Напряжение в вольтах
        ток (float): Ток в амперах
    
    Возвращает:
        float: Мощность в ваттах, или 0 если входные данные некорректны
    """
    if напряжение <= 0 or ток <= 0:
        return 0
    return напряжение * ток


# 2. Функция проверить_устойчивость
def проверить_устойчивость(напряжение, минимальное_напряжение=200):
    """
    Проверяет, находится ли напряжение выше минимального значения
    
    Аргументы:
        напряжение (float): Проверяемое напряжение
        минимальное_напряжение (float): Минимальное допустимое значение
    
    Возвращает:
        bool: True если напряжение >= минимальное_напряжение
    """
    return напряжение >= минимальное_напряжение


# 3. Функция обработать_параметры_нагрузки
def обработать_параметры_нагрузки(параметры):
    """
    Обрабатывает список параметров нагрузки и возвращает статистику
    
    Аргументы:
        параметры (list): Список параметров нагрузки
    
    Возвращает:
        dict: Словарь с максимум, минимум, средним и количеством
    """
    if not параметры:  # если список пустой
        return {
            "максимум": None,
            "минимум": None,
            "среднее": None,
            "количество": 0
        }
    
    максимум = параметры[0]
    минимум = параметры[0]
    сумма = 0
    
    for параметр in параметры:
        if параметр > максимум:
            максимум = параметр
        if параметр < минимум:
            минимум = параметр
        сумма += параметр
    
    среднее = сумма / len(параметры)
    
    return {
        "максимум": максимум,
        "минимум": минимум,
        "среднее": среднее,
        "количество": len(параметры)
    }


# 4. Функция найти_устойчивые_режимы
def найти_устойчивые_режимы(результаты_расчетов):
    """
    Находит напряжения только для устойчивых режимов
    
    Аргументы:
        результаты_расчетов (list): Список словарей с результатами
    
    Возвращает:
        list: Список напряжений устойчивых режимов
    """
    устойчивые_напряжения = []
    
    for результат in результаты_расчетов:
        if результат.get("устойчивость", False):
            напряжение = результат.get("напряжение")
            if напряжение is not None:
                устойчивые_напряжения.append(напряжение)
    
    return устойчивые_напряжения


# 5. Функция форматировать_результат
def форматировать_результат(результат):
    """
    Форматирует словарь результата в строку
    
    Аргументы:
        результат (dict): Словарь с ключами "напряжение", "мощность", "режим"
    
    Возвращает:
        str: Отформатированная строка
    """
    режим = результат.get("режим", "неизвестно")
    напряжение = результат.get("напряжение", 0)
    мощность = результат.get("мощность", 0)
    
    return f"Режим: {режим}, Напряжение: {напряжение} В, Мощность: {мощность} МВт"


# ===== ТЕСТИРОВАНИЕ =====

print("\n1. ТЕСТ: рассчитать_мощность")
print("-" * 60)
мощность1 = рассчитать_мощность(220, 5)
мощность2 = рассчитать_мощность(-10, 5)  # должна вернуть 0
мощность3 = рассчитать_мощность(230, 4.5)
print(f"Мощность при U=220В, I=5А: {мощность1} Вт")
print(f"Мощность при U=-10В, I=5А (некорректно): {мощность2} Вт")
print(f"Мощность при U=230В, I=4.5А: {мощность3} Вт")

print("\n2. ТЕСТ: проверить_устойчивость")
print("-" * 60)
print(f"Устойчивость 220 В: {проверить_устойчивость(220)}")
print(f"Устойчивость 190 В: {проверить_устойчивость(190)}")
print(f"Устойчивость 250 В (мин=240): {проверить_устойчивость(250, 240)}")

print("\n3. ТЕСТ: обработать_параметры_нагрузки")
print("-" * 60)
параметры = [100, 150, 200, 250, 300]
результат_обработки = обработать_параметры_нагрузки(параметры)
print(f"Входные параметры: {параметры}")
print(f"Результат обработки:")
for ключ, значение in результат_обработки.items():
    print(f"  {ключ}: {значение}")

print("\n4. ТЕСТ: найти_устойчивые_режимы")
print("-" * 60)
режимы = [
    {"напряжение": 220, "устойчивость": True},
    {"напряжение": 190, "устойчивость": False},
    {"напряжение": 230, "устойчивость": True},
    {"напряжение": 180, "устойчивость": False}
]
устойчивые = найти_устойчивые_режимы(режимы)
print(f"Все режимы: {режимы}")
print(f"Устойчивые режимы (напряжения): {устойчивые}")

print("\n5. ТЕСТ: форматировать_результат")
print("-" * 60)
результат = {
    "напряжение": 220.5,
    "мощность": 1000.0,
    "режим": "установившийся"
}
строка = форматировать_результат(результат)
print(f"Исходный словарь: {результат}")
print(f"Отформатированная строка: {строка}")

print("\n" + "=" * 60)
print("ВСЕ ТЕСТЫ ВЫПОЛНЕНЫ!")
print("=" * 60)

